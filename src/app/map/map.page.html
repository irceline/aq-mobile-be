<overlay-info-drawer [(state)]="drawerState" [dockedHeight]="dockedHeight">
  <div class="drawer-content">
    <div>
      <h2 text-center>{{'map.overlay.header' | translate}}</h2>
    </div>
    <div>
      <p>{{'map.overlay.content-p1' | translate}}</p>
    </div>
    <div>
      <p text-center><img src="{{'map.overlay.url-svg' | translate}}"></p>
    </div>
    <div>
      <p>{{'map.overlay.content-p2' | translate}}</p>
    </div>
  </div>
</overlay-info-drawer>

<ion-content>
  <div class="container">
    <div class="segment">
      <ion-segment class="phenomenon" [(ngModel)]="phenomenonLabel" (ngModelChange)="onPhenomenonChange()" mode="md">
        <ion-segment-button value="BelAQI" mode="md">
          <div text-center class="entry" [ngStyle]="{'border-color': borderColor[0]}">
            <div *ngIf="loading_colors[0]" class="spinningborder"></div>
            <div class="phenomenon-label">AQI</div>
          </div>
        </ion-segment-button>
        <ion-segment-button value="NO2" mode="md">
          <div text-center class="entry" [ngStyle]="{'border-color': borderColor[1]}">
            <div *ngIf="loading_colors[1]" class="spinningborder"></div>
            <div class="phenomenon-label">NO<sub>2</sub></div>
          </div>
        </ion-segment-button>
        <ion-segment-button value="O3" mode="md">
          <div text-center class="entry" [ngStyle]="{'border-color': borderColor[2]}">
            <div *ngIf="loading_colors[2]" class="spinningborder"></div>
            <div class="phenomenon-label">O<sub>3</sub></div>
          </div>
        </ion-segment-button>
        <ion-segment-button value="PM10" mode="md">
          <div text-center class="entry" [ngStyle]="{'border-color': borderColor[3]}">
            <div *ngIf="loading_colors[3]" class="spinningborder"></div>
            <div class="phenomenon-label">PM<sub>10</sub></div>
          </div>
        </ion-segment-button>
        <ion-segment-button value="PM25" mode="md">
          <div text-center class="entry" [ngStyle]="{'border-color': borderColor[4]}">
            <div *ngIf="loading_colors[4]" class="spinningborder"></div>
            <div class="phenomenon-label">PM<sub>2.5</sub></div>
          </div>
        </ion-segment-button>
        <ion-segment-button value="BC" mode="md">
          <div text-center class="entry" [ngStyle]="{'border-color': borderColor[5]}">
            <div *ngIf="loading_colors[5]" class="spinningborder"></div>
            <div class="phenomenon-label">BC</div>
          </div>
        </ion-segment-button>
      </ion-segment>
    </div>

    <div class="full-phenomenon-label">
      <div *ngIf="selectedPhenomenonLabel">{{selectedPhenomenonLabel}}</div>
      <div *ngIf="!selectedPhenomenonLabel">{{'map.index' | translate}}</div>
    </div>

    <div class="map-wrapper">
      <div class="map" *ngIf="phenomenonLabel">
        <customized-station-map-selector [mapId]="mapId" [serviceUrl]="providerUrl" [filter]="phenomenonFilter"
          [avoidZoomToSelection]="avoidZoomToSelection" [statusIntervals]="true"
          [ignoreStatusIntervalIfBeforeDuration]="statusIntervalDuration" [zoomControlOptions]="zoomControlOptions"
          [overlayMaps]="overlayMaps" [fitBounds]="fitBounds" [markerSelectorGenerator]="markerSelectorGenerator"
          (onSelected)="onStationSelected($event)" [cluster]="clusterStations" (onContentLoading)="onMapLoading($event)"
          (mapInitialized)="mapInitialized($event)"></customized-station-map-selector>
      </div>
      <div class="error" *ngIf="!phenomenonLabel">
        {{'map.error' | translate}}
      </div>
    </div>

    <!--     <div class="segment">
        <ion-segment class="time" [(ngModel)]="time" (ngModelChange)="onTimeChange()" mode="md">
          <ion-segment-button value="current" mode="md">
            {{'map.time.current' | translate}}
          </ion-segment-button>
          <ion-segment-button value="today" [disabled]="disabled" mode="md">
            {{'map.time.today' | translate}}
          </ion-segment-button>
          <ion-segment-button value="tomorrow" [disabled]="disabled" mode="md">
            {{'map.time.tomorrow' | translate}}
          </ion-segment-button>
          <ion-segment-button value="today2" [disabled]="disabled" mode="md">
            {{'map.time.today+2' | translate}}
          </ion-segment-button>
          <ion-segment-button value="today3" [disabled]="disabled" mode="md">
            {{'map.time.today+3' | translate}}
          </ion-segment-button>
        </ion-segment>
      </div> -->

    <div class="panel">
      <ion-toolbar>
        <ion-row>
          <ion-col width-20 text-left>
            {{'map.time.current' | translate}}
          </ion-col>
          <ion-col width-20 text-center>
            {{'map.time.today' | translate}}
          </ion-col>
          <ion-col width-20 text-center>
            {{'map.time.tomorrow' | translate}}
          </ion-col>
          <ion-col width-20 text-center>
            {{'map.time.today+2' | translate}}
          </ion-col>
          <ion-col width-20 text-right>
            {{'map.time.today+3' | translate}}
          </ion-col>
        </ion-row>
        <ion-range (ionChange)="onTimeChange()" min="0" max="4" step="1" snaps="true" [(ngModel)]="timeAsNumber"
          mode="md">
        </ion-range>
      </ion-toolbar>
    </div>
    <div class="panel">
      <ion-toolbar *ngIf="show24hourMean && showYearlyMean && !disableMeans">
        <ion-row>
          <ion-col width-33 text-left>
            {{'map.mean.hourly' | translate}}
          </ion-col>
          <ion-col width-33 text-center>
            {{'map.mean.24hour' | translate}}
          </ion-col>
          <ion-col width-33 text-right>
            {{'map.mean.yearly' | translate}}
          </ion-col>
        </ion-row>
        <ion-range (ionChange)="onMeanChange()" min="0" max="2" step="1" snaps="true" [(ngModel)]="meanAsNumber"
          mode="md">
        </ion-range>
      </ion-toolbar>
    </div>
    <div class="panel">
      <ion-toolbar *ngIf="!show24hourMean && showYearlyMean && !disableMeans">
        <ion-row>
          <ion-col width-50 text-left>
            {{'map.mean.hourly' | translate}}
          </ion-col>
          <ion-col width-50 text-right>
            {{'map.mean.yearly' | translate}}
          </ion-col>
        </ion-row>
        <ion-range (ionChange)="onMeanChange()" min="0" max="2" step="2" snaps="true" [(ngModel)]="meanAsNumber"
          mode="md">
        </ion-range>
      </ion-toolbar>
    </div>

    <!--     <div class="segment">
      <ion-segment class="mean" [(ngModel)]="mean" (ngModelChange)="onMeanChange()" mode="md">
        <ion-segment-button value="hourly"  mode="md">
          {{'map.mean.hourly' | translate}}
        </ion-segment-button>
        <ion-segment-button value="24hour" *ngIf="show24hourMean" [disabled]="disableMeans" mode="md">
          {{'map.mean.24hour' | translate}}
        </ion-segment-button>
        <ion-segment-button value="yearly" *ngIf="showYearlyMean" [disabled]="disableMeans" mode="md">
          {{'map.mean.yearly' | translate}}
        </ion-segment-button>
      </ion-segment>
    </div> -->


  </div>

</ion-content>